{"ast":null,"code":"import _regeneratorRuntime from\"/home/jakub/code/java/BlogProject/simple-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/jakub/code/java/BlogProject/simple-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/jakub/code/java/BlogProject/simple-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import\"./App.css\";import Post from\"./components/Post\";import PostCreate from\"./components/PostCreate\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/posts\");case 2:_context.next=4;return _context.sent.json();case 4:data=_context.sent;setPosts(data);case 6:case\"end\":return _context.stop();}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();var deletePost=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(id,pin){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"/post\",{method:\"DELETE\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({id:id,pin:pin})});case 2:response=_context2.sent;_context2.t0=console;_context2.next=6;return response.json();case 6:_context2.t1=_context2.sent;_context2.t0.log.call(_context2.t0,_context2.t1);fetchData();case 9:case\"end\":return _context2.stop();}},_callee2);}));return function deletePost(_x,_x2){return _ref2.apply(this,arguments);};}();var createPost=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(pin,title,author,text){var response;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(\"/post\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({pin:pin,title:title,author:author,text:text})});case 2:response=_context3.sent;_context3.t0=console;_context3.next=6;return response.json();case 6:_context3.t1=_context3.sent;_context3.t0.log.call(_context3.t0,_context3.t1);fetchData();case 9:case\"end\":return _context3.stop();}},_callee3);}));return function createPost(_x3,_x4,_x5,_x6){return _ref3.apply(this,arguments);};}();useEffect(function(){fetchData();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(PostCreate,{createPost:createPost}),posts===null||posts===void 0?void 0:posts.sort(function(a,b){return b.id-a.id;}).map(function(post){return/*#__PURE__*/_jsx(Post,{postData:post,deletePost:deletePost});})]});};export default App;","map":{"version":3,"names":["useEffect","useState","Post","PostCreate","jsx","_jsx","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","posts","setPosts","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","wrap","_callee$","_context","prev","next","fetch","sent","json","stop","apply","arguments","deletePost","_ref2","_callee2","id","pin","response","_callee2$","_context2","method","headers","body","JSON","stringify","t0","console","t1","log","call","_x","_x2","createPost","_ref3","_callee3","title","author","text","_callee3$","_context3","_x3","_x4","_x5","_x6","className","children","sort","a","b","map","post","postData"],"sources":["/home/jakub/code/java/BlogProject/simple-frontend/src/App.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport \"./App.css\";\nimport Post, { PostData } from \"./components/Post\";\nimport PostCreate from \"./components/PostCreate\";\n\nconst App = (): JSX.Element => {\n  const [posts, setPosts] = useState<PostData[]>();\n\n  const fetchData = async () => {\n    const data: PostData[] = await (await fetch(\"/posts\")).json();\n    setPosts(data);\n  };\n\n  const deletePost = async (id: number, pin: number) => {\n     const response = await fetch(\"/post\", {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ id, pin }),\n    });\n    console.log(await response.json());\n    fetchData();\n  };\n\n  const createPost = async (pin: number, title:string, author:string, text:string) => {\n    const response = await fetch(\"/post\", {\n     method: \"POST\",\n     headers: {\n       \"Content-Type\": \"application/json\",\n     },\n     body: JSON.stringify({pin,title, author, text }),\n   });\n   console.log(await response.json());\n   fetchData();\n };\n\n\n\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  return (\n    <div className=\"App\">\n      <PostCreate createPost={createPost}/>\n      {posts?.sort( (a,b) => {return b.id-a.id}).map((post) => (\n        <Post postData={post} deletePost={deletePost} />\n      ))}\n    </div>\n  );\n};\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}